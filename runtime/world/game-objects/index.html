<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="PlasmaDev">
    <link rel="canonical" href="https://plasmaengine.github.io/PlasmaDocs/runtime/world/game-objects/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Game Objects - PlasmaDocs</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Game Objects", url: "#_top", children: [
              {title: "Creating Game Objects", url: "#creating-game-objects" },
              {title: "Deleting Game Objects", url: "#deleting-game-objects" },
              {title: "Object Transforms", url: "#object-transforms" },
              {title: "Static vs. Dynamic Objects", url: "#static-vs-dynamic-objects" },
              {title: "Active Flag", url: "#active-flag" },
              {title: "Lifetime and Referencing Game Objects", url: "#lifetime-and-referencing-game-objects" },
              {title: "Tags", url: "#tags" },
              {title: "Iterating over Game Objects", url: "#iterating-over-game-objects" },
              {title: "Finding Objects", url: "#finding-objects" },
              {title: "Coordinate System", url: "#coordinate-system" },
              {title: "Messaging", url: "#messaging" },
              {title: "Team ID", url: "#team-id" },
              {title: "See Also", url: "#see-also" },
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../search/main.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../object-lifetime/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../object-lifetime/" class="btn btn-xs btn-link">
        Object Lifetime
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../components/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../components/" class="btn btn-xs btn-link">
        Components
      </a>
    </div>
    
  </div>

    

    <h1 id="game-objects">Game Objects</h1>
<p>For an introduction what a game object is and how it fits into the overall picture, see <a href="../world-overview/">The World / Scenegraph System</a>.</p>
<p>This documentation focuses on the C++ <code>plGameObject</code> class. The functionality exposed through other mechanisms, such as <a href="../../../custom-code/typescript/typescript-overview/">TypeScript</a>, may be more limited in scope, but ultimately maps to the C++ implementation.</p>
<h2 id="creating-game-objects">Creating Game Objects</h2>
<p>You create new game objects by calling <code>plWorld::CreateObject()</code>. This function takes a <code>plGameObjectDesc</code>. This is used to initialize the game object, all options can be changed later on, however things like changing the 'dynamic' state can be expensive to switch.</p>
<h2 id="deleting-game-objects">Deleting Game Objects</h2>
<p>Use <code>plWorld::DeleteObjectDelayed()</code> to remove an object from the world. This will also delete all child nodes and attached components. This function puts the object into a deletion queue and only deallocates it at the end of the frame, so code that still tries to access the object in the same frame will not be affected.</p>
<p>The chapter about <a href="../object-lifetime/">object lifetime</a> explains this in more detail.</p>
<h2 id="object-transforms">Object Transforms</h2>
<p>Game objects have a position, rotation and scaling. These values are separated into <em>local</em> and <em>global</em>. The local transform represents the offset to the <em>parent</em>. If a game object has no parent, the local and global transform are identical.</p>
<p>You can query or modify either, though in the editor the property grid only allows you to set the local transform.</p>
<p>The global transform is computed from the local transform and the global transform of the parent (recursively). For <em>dynamic</em> objects (see below) the global transform is recomputed regularly. <em>Static</em> objects will not be updated after their initial placement.</p>
<h2 id="static-vs-dynamic-objects">Static vs. Dynamic Objects</h2>
<p><em>Static</em> game objects are objects that are considered to never move. <em>Dynamic</em> objects, however, can move around the scene arbitrarily. Internally the engine separates these two types of objects into different memory regions. The object transform for dynamic objects is updated <em>every frame</em>. That means from a performance perspective it makes no difference whether a dynamic object was moved in a frame or not. The transforms for static objects, however, are only updated when it is needed (after creation). If you try to move a static object, you will see warnings in the <a href="../../../debugging/logging/">log</a> in development builds, and the object will not move.</p>
<p>When you build a scene in the editor, you generally don't need to worry about this. Each <a href="../components/">component type</a> is flagged to either be <em>dynamic</em> (meaning it may modify its owner's position) or static. From the attached components, the editor will automatically detect whether a game object must be created as static or dynamic.</p>
<p>However, in some cases you may know that an object will end up having dynamic components later. So to prevent a costly switch from static to dynamic, you can force a game object to be dynamic, by selecting this mode from the properties.</p>
<p>The renderer also caches rendering state for static objects. This does not mean that a static object cannot change rendering state dynamically, but when it does, the code must ensure to properly invalidate the render caches. If switching from static to dynamic fixes a rendering issue, some attached component doesn't handle this cache invalidation correctly.</p>
<h3 id="performance-considerations">Performance Considerations</h3>
<p>For performance reasons it is always best to keep all objects static that don't need to be moved. Due to the render data caching, this can save even more CPU time. However, the code paths to update dynamic objects are still quite heavily optimized. A current CPU can easily handle updating 100.000+ dynamic objects at interactive framerates.</p>
<h2 id="active-flag">Active Flag</h2>
<p>Game objects have an 'active flag'. By default all objects are marked active. If the active flag is removed, all components on that object get deactivated. That means they will not get updated further and in general the object is treated as if it is not part of the world anymore.</p>
<p>The active flag propagates down to child objects. Using <code>plGameObject::GetActiveFlag()</code> you can check the state of the active flag on a given game object. However, even if the flag is set, the game object can still be deactivated, if any one of its parents has been deactivated. You can check this with <code>plGameObject::IsActive()</code>.</p>
<h2 id="lifetime-and-referencing-game-objects">Lifetime and Referencing Game Objects</h2>
<p>When deleting a game object, it typically stays alive till the end of the frame, to make writing robust code easier. You should, however, never store pointers to game objects across frames, as objects can be relocated in memory. Instead, always use <strong>handles</strong> (<code>plGameObjectHandle</code>) to store references to game objects.</p>
<p>The chapter about <a href="../object-lifetime/">object lifetime</a> explains this in more detail.</p>
<p>Components can also <a href="../../scenes/object-references.md">reference objects</a> from their properties. These references are also based on handles.</p>
<h2 id="tags">Tags</h2>
<p>Game objects can have <a href="../../projects/tags.md">tags</a>. These are used to control things like whether the object will cast shadows. However, they are mostly at your disposal to tag objects with game play relevant information.</p>
<h2 id="iterating-over-game-objects">Iterating over Game Objects</h2>
<p>You can iterate over <em>all</em> objects in a world using <code>plWorld::GetObjects()</code>. This will return the objects in an arbitrary order, but is the more efficient way.</p>
<p>You can also traverse the object <em>hierarchy</em> with <code>plWorld::Traverse()</code>. This allows you to list the objects either in a depth-first or a breadth-first order.</p>
<p>When you have a specific game object, you can also iterate over its children with <code>plGameObject::GetChildren()</code>.</p>
<h2 id="finding-objects">Finding Objects</h2>
<p>There are multiple ways to find specific objects, or objects relative to some parent node.</p>
<h3 id="global-keys">Global Keys</h3>
<p>You can assign a game object a <em>global key</em>. This is a string that should be unique across all objects within the world. That includes all game objects from all <a href="../../prefabs/prefabs-overview.md">prefab</a> instances, so you must be very careful with this. If the same global key is used twice, one of them will be ignored.</p>
<p>You can query for a game object by global key using <code>plWorld::TryGetObjectWithGlobalKey()</code>.</p>
<p>Global keys can be useful to find unique objects, like the one player object (in a single player game), or level specific items.</p>
<h3 id="finding-child-objects">Finding Child Objects</h3>
<p>Within an object hierarchy, you can use the <em>name</em> of objects to search for certain child nodes. These functions are available:</p>
<ul>
<li><code>plGameObject::FindChildByName()</code></li>
<li><code>plGameObject::FindChildByPath()</code></li>
<li><code>plGameObject::SearchForChildByNameSequence()</code></li>
<li><code>plGameObject::SearchForChildrenByNameSequence()</code></li>
</ul>
<h2 id="coordinate-system">Coordinate System</h2>
<p>The <a href="../worlds/#coordinate-system">coordinate system of the world</a> is configurable. To make it easier to not hard code assumptions about which axis represents what direction, the game objects provide functions to query the local axis:</p>
<ul>
<li><code>plGameObject::GetGlobalDirForwards()</code></li>
<li><code>plGameObject::GetGlobalDirRight()</code></li>
<li><code>plGameObject::GetGlobalDirUp()</code></li>
</ul>
<p>These functions return the respective directions in global space considering the worlds coordinate system and the objects own global rotation.</p>
<h2 id="messaging">Messaging</h2>
<p>You can send messages to all components attached to an object, or the entire hierarchy below an object. You can also send <em>event messages</em>, which will 'bubble up' the hierarchy until they find a component to handle it.</p>
<p>See the chapter about <a href="../world-messaging/">messaging</a> for details.</p>
<h2 id="team-id">Team ID</h2>
<p>All game objects store a 16 bit <em>team ID</em>. This value can be used to identify which team or faction an object belongs to. The team ID has no functionality by itself, you can use it or ignore it.</p>
<p>The one feature that the team ID has, is that it is automatically propagated for you when components create objects or instantiate <a href="../../prefabs/prefabs-overview.md">prefabs</a>. This way, when a player with team ID <code>3</code> shoots, the bullet prefab that gets instantiated by the <a href="../../../gameplay/spawn-component/">spawn component</a> will automatically be assigned team ID <code>3</code> as well. Thus when that bullet hits another player, your code can easily attribute a kill to a team, or filter out friendly fire.</p>
<p>Although it would be possible to implement something similar entirely with custom components, only by having this in the basic game object, is it possible to trace this information even through built in components, meaning you don't need to reimplement basic functionality like the spawn component or the <a href="../../../gameplay/projectile-component/">projectile component</a>.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../world-overview/">The World / Scenegraph System</a></li>
<li><a href="../components/">Components</a></li>
<li><a href="../object-lifetime/">Object Lifetime</a></li>
<li><a href="../world-messaging/">Messaging</a></li>
</ul>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../object-lifetime/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../object-lifetime/" class="btn btn-xs btn-link">
        Object Lifetime
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../components/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../components/" class="btn btn-xs btn-link">
        Components
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/noraj/mkdocs-windmill-dark">Windmill Dark</a> theme by Alexandre ZANNI (noraj).</p>
</footer>

</body>
</html>