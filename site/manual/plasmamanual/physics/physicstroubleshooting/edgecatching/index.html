<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../../img/favicon.ico">
        <title>Edgecatching - Docs | Plasma Engine</title>
        <link href="../../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">

        <script src="../../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../../..">Docs | Plasma Engine</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../../../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="/getting_started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Manual <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../" class="dropdown-item">Manual</a>
</li>
                                    
<li>
    <a href="../../../ai/" class="dropdown-item">AI</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Architecture</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../architecture/architecture/" class="dropdown-item">Architecture</a>
</li>
            
<li>
    <a href="../../../architecture/archetypes/archtype_basics.markdown" class="dropdown-item">Archtypes</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cogs</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../architecture/cogs/cogs/" class="dropdown-item">Cogs</a>
</li>
            
<li>
    <a href="../../../architecture/cogs/gameobjectsconcept/" class="dropdown-item">Game Objects</a>
</li>
            
<li>
    <a href="../../../architecture/cogs/objectstore/" class="dropdown-item">Object Store</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Objects</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../architecture/objects/objects/" class="dropdown-item">Objects</a>
</li>
            
<li>
    <a href="../../../architecture/objects/gamesession/" class="dropdown-item">Gamesession</a>
</li>
            
<li>
    <a href="../../../architecture/objects/spaces/" class="dropdown-item">Spaces</a>
</li>
            
<li>
    <a href="../../../architecture/objects/levelsettings/" class="dropdown-item">Levelsettings</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Resources</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../architecture/resources/resource.markdown" class="dropdown-item">Resources</a>
</li>
            
<li>
    <a href="../../../architecture/resources/level/" class="dropdown-item">Levels</a>
</li>
            
<li>
    <a href="../../../architecture/fonts/fonts.markdown" class="dropdown-item">Fonts</a>
</li>
            
<li>
    <a href="../../../architecture/resources/resourcestable.markdown" class="dropdown-item">Resource Table</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
<li>
    <a href="../../../audio/" class="dropdown-item">Audio</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Editor</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../editor/" class="dropdown-item">Editor</a>
</li>
            
<li>
    <a href="../../../editor/tags/" class="dropdown-item">Tags</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../reference/" class="dropdown-item">Index</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../source_docs/getting_started.md" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/plasma_code/" class="dropdown-item">Plasma Code</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/plasma_overview/" class="dropdown-item">Plasma Overview</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/components.md" class="dropdown-item">Components</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/custom_event_names/" class="dropdown-item">Custom Event Names</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/editor/" class="dropdown-item">Editor</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/engine/" class="dropdown-item">Engine</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/enums/" class="dropdown-item">Enums</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/meta_bindings.markdown" class="dropdown-item">Meta Binding</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/platform/" class="dropdown-item">Adding Platforms</a>
</li>
                                    
<li>
    <a href="../../../../../source_docs/widgets/" class="dropdown-item">Widgets</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/PlasmaEngine/PlasmaDocs/edit/master/docs/manual/plasmamanual/physics/physicstroubleshooting/edgecatching.markdown" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>Sometimes a physics object will seem to get stuck on a smooth surface. This is often caused by an issue known as edge-catching. This issue is most common when creating a player.</p>
<p>In a game, the ground is often piece-wise, i.e. made of a collection of individual pieces. In this example, assume that the ground is a collection of boxes. Now a rotation locked player is implemented with a <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/colliders/boxcollider.markdown">BoxCollider</a> to move via simple velocity changes (velocity is the drawn arrow). </p>
<p><img alt="EdgeCatchingGif" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46367.gif" /></p>
<p>Sometimes the player will stop moving even though input is setting a velocity. This behavior is caused by the seams on the ground. For an explanation of why this happens a quick physics primer is necessary.</p>
<p>#  Physics Primer: Discrete Collision Detection
Physics engines are often implemented with discrete collision detection. This is easiest to think of as a picture flip-book where physics teleports each object from frame-to-frame. This presents a problem to physics as objects will already be overlapping by the time collision is detected. To fix collisions, physics has to approximate the best direction in which to push the objects apart. The approach taken is to find the minimum translational distance required to push the objects apart.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46368.png" /></p>
<p>Given the above configuration, all 4 primary directions can be checked for the minimum translational distance.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46370.png" /></p>
<p>It should be clear that pushing the box up requires less work than the other four directions.</p>
<p>#  Edge Catching
Sometimes physics incorrectly guesses what the best distance is. This commonly happens when gravity is combined with player input and collision happens at a corner. Even though two boxes are next to each other with no seam between, physics detects collision between each box in isolation.</p>
<p>A step-by-step illustration is provided:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46372.png" /></p>
<p>First look at a movable box resting at the seam between two boxes. For this illustration the focus will be on the red box and the blue box on the right.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46374.png" /></p>
<p>Forces for the frame are applied to the red box.  First, gravity pulls the red box down. Additionally, an input force pushes the red box to the right.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46376.png" /></p>
<p>After updating position from forces, the physics system will see this scenario. The red box is in contact with both ground surfaces and collision needs to fix the overlap by pushing it out.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46378.png" /></p>
<p>Each ground surface will independently determine the minimum translational distance. The left box will correctly push up. The right box will unfortunately push to the left since this requires the least movement.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46380.png" /></p>
<p>Now physics resolves collisions and puts the red box right back where it started. Given the same forces, the red box will repeat this cycle and be stuck on this seam in the ground.</p>
<p>#  Fixing Edge Catching</p>
<p>Unfortunately there is no perfect generic solution to the edge catching problem. There are two main approaches to work around the problem:</p>
<p><strong>Change your collision:</strong> The root issue here is that a seam does exist. One way to fix this is to remove the seam by merging the surface's collision. It's near impossible to remove all seams in a game though, and it is often more practical to change the player's collision shape. Commonly, a player uses a <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/colliders/capsulecollider.markdown">CapsuleCollider</a> instead of a <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/colliders/boxcollider.markdown">BoxCollider</a> to avoid seams.</p>
<p><img alt="image" src="https://raw.githubusercontent.com/PlasmaEngine/PlasmaDocs/master/media/46382.png" /></p>
<p>In the above illustration, the box on the left has a minimum translational distance that will push it to the left. The capsule however, has a minimum translational distance that is up and to the left. This will allow the capsule to move to the right a bit and escape the cycle of edge catching after a few frames. </p>
<p>While this method mostly fixes edge catching, it tends to produce small bumps when crossing edges. This is because of the portion of the minimum translational distance that still points against the player's velocity.</p>
<p><strong>Use the SweptController:</strong> Plasma provides a character controller that uses //swept collision//. Swept collision is different than discrete collision because it detects exactly when a collision happens. This prevents a player from ever colliding with an internal edge because it must first collide with the surface.</p>
<p>There's two issues with the swept controller.
 - It's more computationally expensive. This isn't an issue for a few number of objects, such as the player, but wouldn't be practical for every object.
 - It only works with Kinematic objects. Using the swept controller means manually translating the player and not working through velocity and forces. This swept object will no longer react to <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/physicseffectsandregions.markdown">PhysicsEffects</a>, collision resolution won't do anything, and Joints won't affect it. For some games this may make the SweptController impractical.</p>
<hr />
<p>#  Related Materials
 ##  Manual
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting.markdown">physicstroubleshooting.markdown</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/physicsspace.markdown">physicsspace.markdown</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/colliders.markdown">colliders.markdown</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/colliders/boxcollider.markdown">boxcollider.markdown</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/colliders/capsulecollider.markdown">capsulecollider.markdown</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/plasma_editor_documentation/plasmamanual/physics/physicstroubleshooting/physicseffectsandregions.markdown">physicseffectsandregions.markdown</a>
 ##  Reference
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/code_reference/class_reference/physicsspace.markdown">PhysicsSpace</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/code_reference/class_reference/collider.markdown">Collider</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/code_reference/class_reference/boxcollider.markdown">BoxCollider</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/code_reference/class_reference/capsulecollider.markdown">CapsuleCollider</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/code_reference/class_reference/physicseffect.markdown">PhysicsEffect</a>
- <a href="https://github.com/PlasmaEngine/PlasmaDocs/blob/master/code_reference/class_reference/region.markdown">Region</a> </p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021 Plasma Engine. Released under the MIT License.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../../js/base.js" defer></script>
        <script src="../../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
